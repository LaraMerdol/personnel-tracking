<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <link href="../lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../lib/datatables/datatables.css" rel="stylesheet" />
    <link href="../lib/datatables/DataTables-1.10.25/css/dataTables.bootstrap5.min.css" rel="stylesheet" />
    <link href="../lib/datatables/buttons.dataTables.min.css" rel="stylesheet" />
    <script src="../lib/jquery/dist/jquery.min.js"></script>
    <script src="../lib/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="../lib/datatables/datatables.min.js"></script>
    <script src="../lib/datatables/dataTables.buttons.min.js"></script>
    <script src="../lib/datatables/DataTables-1.10.25/js/dataTables.bootstrap5.min.js"></script>
    <script src="../lib/qrcode/qrcode.min.js"></script>
    <script src="index.js"></script>
    <!------ Include the above in your HEAD tag ---------->
</head>
<body>
    <div id="login">
        <h3 class="text-center text-white pt-5">Login form</h3>
        <div class="container">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Create new personnel</h5>
                </div>
                <div class="modal-body">
                    <form id="login-form" class="needs-validation" novalidate>

                        <div class="form-group">
                            <label for="idNum-input">Identity number</label>
                            <input type="number" class="form-control validate-me" id="personnel_IDnumber" required>
                            <div class="error-id" style="display: none">Please enter a number</div>
                        </div>
                        <button type="submit" class="btn btn-primary">Submit</button>

                    </form>
                </div>
         
            </div>
        </div>
    </div>
</body>
</html>
<style>
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    /* Firefox */
    input[type=number] {
        -moz-appearance: textfield;
    }
</style>
<script>
    var form = document.getElementById("login-form");
    alert(form.length);
    form.addEventListener('submit', (e) => {

        e.preventDefault();
        var identityNumber = $('#personnel_IDnumber').val();
        var idNum = {
            identityNumber: Number(identityNumber),
        }
        checkValidIdentityNumber(idNum);

    });

     function checkValidIdentityNumber(values) {
        alert(values);
        var returnVal;
        var settings = {
            'url': 'http://localhost:5000/api/personnel/checkIDNum',
            'method': 'GET',
            'headers': {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer token'
                
            },
            'dataType': 'json',
            'data': values,
          
          
        };
         $.ajax(settings).done((response) => {
            console.log(response.data);
            if (String(response.data) == "Does not exist") {

                console.log("false");
                returnVal = false;
            }
            else {
                console.log("true");
                returnVal = true;
            }

        });
        return returnVal;
    }
</script>

